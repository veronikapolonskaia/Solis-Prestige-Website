
> server@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
[dotenv@17.2.1] injecting env (28) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
üöÄ Ecommerce API server running on port 5000
üìä Environment: development
üîó API Base URL: http://localhost:5000
üè• Health Check: http://localhost:5000/health
üìö API Documentation: http://localhost:5000/api/docs
Executing (default): SELECT 1+1 AS result
Database connection has been established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'users'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_users_role' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'users' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'users' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "users" ALTER COLUMN "email" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "email" DROP DEFAULT;ALTER TABLE "users"  ADD UNIQUE ("email");ALTER TABLE "users" ALTER COLUMN "email" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "users" ALTER COLUMN "password" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "password" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "password" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "users" ALTER COLUMN "first_name" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "first_name" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "first_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "users" ALTER COLUMN "last_name" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "last_name" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "last_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "users" ALTER COLUMN "phone" DROP NOT NULL;ALTER TABLE "users" ALTER COLUMN "phone" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "phone" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "users" ALTER COLUMN "role" DROP NOT NULL;ALTER TABLE "users" ALTER COLUMN "role" SET DEFAULT 'customer';DO 'BEGIN CREATE TYPE "public"."enum_users_role" AS ENUM(''admin'', ''customer''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "users" ALTER COLUMN "role" TYPE "public"."enum_users_role" USING ("role"::"public"."enum_users_role");
Executing (default): ALTER TABLE "users" ALTER COLUMN "is_active" DROP NOT NULL;ALTER TABLE "users" ALTER COLUMN "is_active" SET DEFAULT true;ALTER TABLE "users" ALTER COLUMN "is_active" TYPE BOOLEAN;
Executing (default): ALTER TABLE "users" ALTER COLUMN "email_verified" DROP NOT NULL;ALTER TABLE "users" ALTER COLUMN "email_verified" SET DEFAULT false;ALTER TABLE "users" ALTER COLUMN "email_verified" TYPE BOOLEAN;
Executing (default): ALTER TABLE "users" ALTER COLUMN "last_login" DROP NOT NULL;ALTER TABLE "users" ALTER COLUMN "last_login" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "last_login" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "users" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "users" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "users" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "users" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'users' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'categories'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'categories' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'categories' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "categories" ALTER COLUMN "name" SET NOT NULL;ALTER TABLE "categories" ALTER COLUMN "name" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "categories" ALTER COLUMN "slug" SET NOT NULL;ALTER TABLE "categories" ALTER COLUMN "slug" DROP DEFAULT;ALTER TABLE "categories"  ADD UNIQUE ("slug");ALTER TABLE "categories" ALTER COLUMN "slug" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "description" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "description" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "description" TYPE TEXT;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "image" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "image" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "image" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "categories" DROP CONSTRAINT "categories_parent_id_fkey"
Executing (default): ALTER TABLE "categories"  ADD FOREIGN KEY ("parent_id") REFERENCES "categories" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "is_active" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "is_active" SET DEFAULT true;ALTER TABLE "categories" ALTER COLUMN "is_active" TYPE BOOLEAN;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "sort_order" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "sort_order" SET DEFAULT 0;ALTER TABLE "categories" ALTER COLUMN "sort_order" TYPE INTEGER;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "meta_title" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "meta_title" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "meta_title" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "categories" ALTER COLUMN "meta_description" DROP NOT NULL;ALTER TABLE "categories" ALTER COLUMN "meta_description" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "meta_description" TYPE TEXT;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "categories" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "categories" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "categories" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "categories" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'categories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'products'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'products' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'products' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "products" ALTER COLUMN "name" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "name" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "products" ALTER COLUMN "slug" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "slug" DROP DEFAULT;ALTER TABLE "products"  ADD UNIQUE ("slug");ALTER TABLE "products" ALTER COLUMN "slug" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "products" ALTER COLUMN "description" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "description" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "description" TYPE TEXT;
Executing (default): ALTER TABLE "products" ALTER COLUMN "short_description" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "short_description" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "short_description" TYPE TEXT;
Executing (default): ALTER TABLE "products" ALTER COLUMN "sku" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "sku" DROP DEFAULT;ALTER TABLE "products"  ADD UNIQUE ("sku");ALTER TABLE "products" ALTER COLUMN "sku" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "products" ALTER COLUMN "price" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "price" SET DEFAULT 0;ALTER TABLE "products" ALTER COLUMN "price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "products" ALTER COLUMN "compare_price" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "compare_price" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "compare_price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "products" ALTER COLUMN "cost_price" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "cost_price" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "cost_price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "products" ALTER COLUMN "track_quantity" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "track_quantity" SET DEFAULT true;ALTER TABLE "products" ALTER COLUMN "track_quantity" TYPE BOOLEAN;
Executing (default): ALTER TABLE "products" ALTER COLUMN "quantity" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "quantity" SET DEFAULT 0;ALTER TABLE "products" ALTER COLUMN "quantity" TYPE INTEGER;
Executing (default): ALTER TABLE "products" ALTER COLUMN "weight" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "weight" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "weight" TYPE DECIMAL(8,2);
Executing (default): ALTER TABLE "products" ALTER COLUMN "taxable" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "taxable" SET DEFAULT true;ALTER TABLE "products" ALTER COLUMN "taxable" TYPE BOOLEAN;
Executing (default): ALTER TABLE "products" ALTER COLUMN "is_active" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "is_active" SET DEFAULT true;ALTER TABLE "products" ALTER COLUMN "is_active" TYPE BOOLEAN;
Executing (default): ALTER TABLE "products" ALTER COLUMN "meta_title" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "meta_title" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "meta_title" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "products" ALTER COLUMN "meta_description" DROP NOT NULL;ALTER TABLE "products" ALTER COLUMN "meta_description" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "meta_description" TYPE TEXT;
Executing (default): ALTER TABLE "products" DROP CONSTRAINT "products_category_id_fkey"
Executing (default): ALTER TABLE "products"  ADD FOREIGN KEY ("category_id") REFERENCES "categories" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "products" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "products" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "products" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "products" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'products' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'product_images'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'product_images' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'product_images' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "product_images" DROP CONSTRAINT "product_images_product_id_fkey"
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "product_id" SET NOT NULL;ALTER TABLE "product_images"  ADD FOREIGN KEY ("product_id") REFERENCES "products" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "url" SET NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "url" DROP DEFAULT;ALTER TABLE "product_images" ALTER COLUMN "url" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "alt_text" DROP NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "alt_text" DROP DEFAULT;ALTER TABLE "product_images" ALTER COLUMN "alt_text" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "sort_order" DROP NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "sort_order" SET DEFAULT 0;ALTER TABLE "product_images" ALTER COLUMN "sort_order" TYPE INTEGER;
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "is_main" DROP NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "is_main" SET DEFAULT false;ALTER TABLE "product_images" ALTER COLUMN "is_main" TYPE BOOLEAN;
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "product_images" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "product_images" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "product_images" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "product_images" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'product_images' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'product_variants'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'product_variants' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'product_variants' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "product_variants" DROP CONSTRAINT "product_variants_product_id_fkey"
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "product_id" SET NOT NULL;ALTER TABLE "product_variants"  ADD FOREIGN KEY ("product_id") REFERENCES "products" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "name" SET NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "name" DROP DEFAULT;ALTER TABLE "product_variants" ALTER COLUMN "name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "sku" SET NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "sku" DROP DEFAULT;ALTER TABLE "product_variants"  ADD UNIQUE ("sku");ALTER TABLE "product_variants" ALTER COLUMN "sku" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "price" SET NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "price" SET DEFAULT 0;ALTER TABLE "product_variants" ALTER COLUMN "price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "quantity" DROP NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "quantity" SET DEFAULT 0;ALTER TABLE "product_variants" ALTER COLUMN "quantity" TYPE INTEGER;
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "weight" DROP NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "weight" DROP DEFAULT;ALTER TABLE "product_variants" ALTER COLUMN "weight" TYPE DECIMAL(8,2);
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "image" DROP NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "image" DROP DEFAULT;ALTER TABLE "product_variants" ALTER COLUMN "image" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "attributes" DROP NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "attributes" SET DEFAULT '{}';ALTER TABLE "product_variants" ALTER COLUMN "attributes" TYPE JSONB;
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "product_variants" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "product_variants" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "product_variants" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "product_variants" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'product_variants' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'orders'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_payment_status' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'orders' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'orders' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "orders" DROP CONSTRAINT "orders_user_id_fkey"
Executing (default): ALTER TABLE "orders"  ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "order_number" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "order_number" DROP DEFAULT;ALTER TABLE "orders"  ADD UNIQUE ("order_number");ALTER TABLE "orders" ALTER COLUMN "order_number" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "status" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "status" SET DEFAULT 'pending';DO 'BEGIN CREATE TYPE "public"."enum_orders_status" AS ENUM(''pending'', ''processing'', ''shipped'', ''delivered'', ''cancelled'', ''refunded''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "orders" ALTER COLUMN "status" TYPE "public"."enum_orders_status" USING ("status"::"public"."enum_orders_status");
Executing (default): ALTER TABLE "orders" ALTER COLUMN "subtotal" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "subtotal" SET DEFAULT 0;ALTER TABLE "orders" ALTER COLUMN "subtotal" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "tax_amount" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "tax_amount" SET DEFAULT 0;ALTER TABLE "orders" ALTER COLUMN "tax_amount" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "shipping_amount" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "shipping_amount" SET DEFAULT 0;ALTER TABLE "orders" ALTER COLUMN "shipping_amount" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "discount_amount" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "discount_amount" SET DEFAULT 0;ALTER TABLE "orders" ALTER COLUMN "discount_amount" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "total" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "total" SET DEFAULT 0;ALTER TABLE "orders" ALTER COLUMN "total" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "currency" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "currency" SET DEFAULT 'USD';ALTER TABLE "orders" ALTER COLUMN "currency" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "payment_status" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "payment_status" SET DEFAULT 'pending';DO 'BEGIN CREATE TYPE "public"."enum_orders_payment_status" AS ENUM(''pending'', ''paid'', ''failed'', ''refunded''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "orders" ALTER COLUMN "payment_status" TYPE "public"."enum_orders_payment_status" USING ("payment_status"::"public"."enum_orders_payment_status");
Executing (default): ALTER TABLE "orders" ALTER COLUMN "payment_method" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "payment_method" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "payment_method" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "shipping_address" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "shipping_address" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "shipping_address" TYPE JSONB;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "billing_address" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "billing_address" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "billing_address" TYPE JSONB;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "notes" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "notes" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "notes" TYPE TEXT;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "tracking_number" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "tracking_number" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "tracking_number" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "orders" ALTER COLUMN "shipped_at" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "shipped_at" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "shipped_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "delivered_at" DROP NOT NULL;ALTER TABLE "orders" ALTER COLUMN "delivered_at" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "delivered_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "orders" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "orders" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'orders' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_items'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'order_items' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'order_items' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "order_items" DROP CONSTRAINT "order_items_order_id_fkey"
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "order_id" SET NOT NULL;ALTER TABLE "order_items"  ADD FOREIGN KEY ("order_id") REFERENCES "orders" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "order_items" DROP CONSTRAINT "order_items_product_id_fkey"
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "product_id" SET NOT NULL;ALTER TABLE "order_items"  ADD FOREIGN KEY ("product_id") REFERENCES "products" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "order_items" DROP CONSTRAINT "order_items_variant_id_fkey"
Executing (default): ALTER TABLE "order_items"  ADD FOREIGN KEY ("variant_id") REFERENCES "product_variants" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "quantity" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "quantity" SET DEFAULT 1;ALTER TABLE "order_items" ALTER COLUMN "quantity" TYPE INTEGER;
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "price" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "price" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "total" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "total" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "total" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "product_name" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "product_name" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "product_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "variant_name" DROP NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "variant_name" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "variant_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "sku" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "sku" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "sku" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "weight" DROP NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "weight" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "weight" TYPE DECIMAL(8,2);
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "attributes" DROP NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "attributes" SET DEFAULT '{}';ALTER TABLE "order_items" ALTER COLUMN "attributes" TYPE JSONB;
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "order_items" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "order_items" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "order_items" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_items' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'carts'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'carts' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'carts' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "carts" DROP CONSTRAINT "carts_user_id_fkey"
Executing (default): ALTER TABLE "carts"  ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "carts" ALTER COLUMN "session_id" DROP NOT NULL;ALTER TABLE "carts" ALTER COLUMN "session_id" DROP DEFAULT;ALTER TABLE "carts" ALTER COLUMN "session_id" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "carts" DROP CONSTRAINT "carts_product_id_fkey"
Executing (default): ALTER TABLE "carts" ALTER COLUMN "product_id" SET NOT NULL;ALTER TABLE "carts"  ADD FOREIGN KEY ("product_id") REFERENCES "products" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "carts" DROP CONSTRAINT "carts_variant_id_fkey"
Executing (default): ALTER TABLE "carts"  ADD FOREIGN KEY ("variant_id") REFERENCES "product_variants" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "carts" ALTER COLUMN "quantity" SET NOT NULL;ALTER TABLE "carts" ALTER COLUMN "quantity" SET DEFAULT 1;ALTER TABLE "carts" ALTER COLUMN "quantity" TYPE INTEGER;
Executing (default): ALTER TABLE "carts" ALTER COLUMN "price" SET NOT NULL;ALTER TABLE "carts" ALTER COLUMN "price" DROP DEFAULT;ALTER TABLE "carts" ALTER COLUMN "price" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "carts" ALTER COLUMN "attributes" DROP NOT NULL;ALTER TABLE "carts" ALTER COLUMN "attributes" SET DEFAULT '{}';ALTER TABLE "carts" ALTER COLUMN "attributes" TYPE JSONB;
Executing (default): ALTER TABLE "carts" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "carts" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "carts" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "carts" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "carts" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "carts" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'carts' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'addresses'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_addresses_type' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'addresses' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'addresses' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "addresses" DROP CONSTRAINT "addresses_user_id_fkey"
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "user_id" SET NOT NULL;ALTER TABLE "addresses"  ADD FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON DELETE CASCADE ON UPDATE CASCADE;
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "type" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "type" DROP DEFAULT;DO 'BEGIN CREATE TYPE "public"."enum_addresses_type" AS ENUM(''billing'', ''shipping''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "addresses" ALTER COLUMN "type" TYPE "public"."enum_addresses_type" USING ("type"::"public"."enum_addresses_type");
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "first_name" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "first_name" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "first_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "last_name" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "last_name" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "last_name" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "company" DROP NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "company" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "company" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "address1" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "address1" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "address1" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "address2" DROP NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "address2" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "address2" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "city" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "city" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "city" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "state" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "state" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "state" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "zip_code" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "zip_code" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "zip_code" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "country" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "country" SET DEFAULT 'US';ALTER TABLE "addresses" ALTER COLUMN "country" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "phone" DROP NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "phone" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "phone" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "is_default" DROP NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "is_default" SET DEFAULT false;ALTER TABLE "addresses" ALTER COLUMN "is_default" TYPE BOOLEAN;
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "addresses" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "addresses" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "addresses" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'addresses' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'settings'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'settings' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'settings' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "settings" ALTER COLUMN "key" SET NOT NULL;ALTER TABLE "settings" ALTER COLUMN "key" DROP DEFAULT;ALTER TABLE "settings"  ADD UNIQUE ("key");ALTER TABLE "settings" ALTER COLUMN "key" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "settings" ALTER COLUMN "value" SET NOT NULL;ALTER TABLE "settings" ALTER COLUMN "value" DROP DEFAULT;ALTER TABLE "settings" ALTER COLUMN "value" TYPE JSONB;
Executing (default): ALTER TABLE "settings" ALTER COLUMN "category" SET NOT NULL;ALTER TABLE "settings" ALTER COLUMN "category" SET DEFAULT 'general';ALTER TABLE "settings" ALTER COLUMN "category" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "settings" ALTER COLUMN "description" DROP NOT NULL;ALTER TABLE "settings" ALTER COLUMN "description" DROP DEFAULT;ALTER TABLE "settings" ALTER COLUMN "description" TYPE TEXT;
Executing (default): ALTER TABLE "settings" ALTER COLUMN "is_public" DROP NOT NULL;ALTER TABLE "settings" ALTER COLUMN "is_public" SET DEFAULT false;ALTER TABLE "settings" ALTER COLUMN "is_public" TYPE BOOLEAN;
Executing (default): ALTER TABLE "settings" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "settings" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "settings" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "settings" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "settings" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "settings" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'settings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'galleries'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_galleries_category' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_galleries_status' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'galleries' AND c.table_schema = 'public'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'galleries' AND tc.table_catalog = 'postgres'
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "title" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "title" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "title" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "description" DROP NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "description" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "description" TYPE TEXT;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "image_url" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "image_url" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "image_url" TYPE VARCHAR(500);
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "thumbnail_url" DROP NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "thumbnail_url" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "thumbnail_url" TYPE VARCHAR(500);
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "category" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "category" SET DEFAULT 'other';DO 'BEGIN CREATE TYPE "public"."enum_galleries_category" AS ENUM(''birthday'', ''corporate'', ''wedding'', ''school'', ''festival'', ''other''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "galleries" ALTER COLUMN "category" TYPE "public"."enum_galleries_category" USING ("category"::"public"."enum_galleries_category");
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "featured" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "featured" SET DEFAULT false;ALTER TABLE "galleries" ALTER COLUMN "featured" TYPE BOOLEAN;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "display_order" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "display_order" SET DEFAULT 0;ALTER TABLE "galleries" ALTER COLUMN "display_order" TYPE INTEGER;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "alt_text" DROP NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "alt_text" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "alt_text" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "tags" DROP NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "tags" SET DEFAULT '[]';ALTER TABLE "galleries" ALTER COLUMN "tags" TYPE JSON;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "metadata" DROP NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "metadata" SET DEFAULT '{}';ALTER TABLE "galleries" ALTER COLUMN "metadata" TYPE JSON;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "status" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "status" SET DEFAULT 'active';DO 'BEGIN CREATE TYPE "public"."enum_galleries_status" AS ENUM(''active'', ''inactive'', ''draft''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "galleries" ALTER COLUMN "status" TYPE "public"."enum_galleries_status" USING ("status"::"public"."enum_galleries_status");
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "created_at" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "created_at" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "created_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "galleries" ALTER COLUMN "updated_at" SET NOT NULL;ALTER TABLE "galleries" ALTER COLUMN "updated_at" DROP DEFAULT;ALTER TABLE "galleries" ALTER COLUMN "updated_at" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'galleries' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database initialized successfully
